<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Bundler::Installer - bundler-1.12.2 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Environment.html">Bundler::Environment</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-install">::install</a>
    
    <li ><a href="#method-i-can_install_in_parallel-3F">#can_install_in_parallel?</a>
    
    <li ><a href="#method-i-create_bundle_path">#create_bundle_path</a>
    
    <li ><a href="#method-i-generate_bundler_executable_stubs">#generate_bundler_executable_stubs</a>
    
    <li ><a href="#method-i-generate_standalone_bundler_executable_stubs">#generate_standalone_bundler_executable_stubs</a>
    
    <li ><a href="#method-i-install">#install</a>
    
    <li ><a href="#method-i-install_in_parallel">#install_in_parallel</a>
    
    <li ><a href="#method-i-resolve_if_need">#resolve_if_need</a>
    
    <li ><a href="#method-i-run">#run</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Bundler::Installer">
  <h1 id="class-Bundler::Installer" class="class">
    class Bundler::Installer
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-c-ambiguous_gems" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">ambiguous_gems</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-post_install_messages" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">post_install_messages</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-install" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install</span><span
            class="method-args">(root, definition, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Begins the installation process for <a href="../Bundler.html">Bundler</a>.
For more information see the <a href="Installer.html#method-i-run">run</a>
method on this class.</p>
          
          

          
          <div class="method-source-code" id="install-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 20</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">install</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">installer</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">definition</span>)
  <span class="ruby-identifier">installer</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">installer</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-generate_bundler_executable_stubs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_bundler_executable_stubs</span><span
            class="method-args">(spec, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_bundler_executable_stubs-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:binstubs_cmd</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">options</span> = {}
    <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">runtime_dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">bins</span> = <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">specs</span>[<span class="ruby-identifier">dep</span>].<span class="ruby-identifier">first</span>.<span class="ruby-identifier">executables</span>
      <span class="ruby-identifier">options</span>[<span class="ruby-identifier">dep</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">bins</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">bins</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{spec.name} has no executables, but you may want &quot;</span>              <span class="ruby-string">&quot;one from a gem it depends on.&quot;</span>
      <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">bins</span><span class="ruby-operator">|</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;  #{name} has: #{bins.join(&quot;, &quot;)}&quot;</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;There are no executables for the gem #{spec.name}.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># double-assignment to avoid warnings about variables that will be used by ERB</span>
  <span class="ruby-identifier">bin_path</span> = <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bin_path</span>
  <span class="ruby-identifier">template</span> = <span class="ruby-identifier">template</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;../templates/Executable&quot;</span>, <span class="ruby-keyword">__FILE__</span>))
  <span class="ruby-identifier">relative_gemfile_path</span> = <span class="ruby-identifier">relative_gemfile_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
  <span class="ruby-identifier">ruby_command</span> = <span class="ruby-identifier">ruby_command</span> = <span class="ruby-constant">Thor</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">ruby_command</span>

  <span class="ruby-identifier">exists</span> = []
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">executable</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">executable</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bundle&quot;</span>

    <span class="ruby-identifier">binstub_path</span> = <span class="ruby-node">&quot;#{bin_path}/#{executable}&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">binstub_path</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:force</span>]
      <span class="ruby-identifier">exists</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">executable</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">binstub_path</span>, <span class="ruby-string">&quot;w&quot;</span>, <span class="ruby-value">0777</span> <span class="ruby-operator">&amp;</span> <span class="ruby-operator">~</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">umask</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">template</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;-&quot;</span>).<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:binstubs_cmd</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exists</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">exists</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{exists[0]} since it already exists.&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{exists.join(&quot; and &quot;)} since they already exist.&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">items</span> = <span class="ruby-identifier">exists</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">exists</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)
      <span class="ruby-identifier">skipped</span> = [<span class="ruby-identifier">items</span>, <span class="ruby-identifier">exists</span>[<span class="ruby-value">-1</span>]].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot; and &quot;</span>)
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{skipped} since they already exist.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;If you want to overwrite skipped stubs, use --force.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-generate_standalone_bundler_executable_stubs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_standalone_bundler_executable_stubs</span><span
            class="method-args">(spec)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_standalone_bundler_executable_stubs-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_standalone_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-comment"># double-assignment to avoid warnings about variables that will be used by ERB</span>
  <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bin_path</span>
  <span class="ruby-identifier">standalone_path</span> = <span class="ruby-identifier">standalone_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:path</span>]).<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
  <span class="ruby-identifier">template</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;../templates/Executable.standalone&quot;</span>, <span class="ruby-keyword">__FILE__</span>))
  <span class="ruby-identifier">ruby_command</span> = <span class="ruby-identifier">ruby_command</span> = <span class="ruby-constant">Thor</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">ruby_command</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">executable</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">executable</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bundle&quot;</span>
    <span class="ruby-identifier">executable_path</span> = <span class="ruby-identifier">executable_path</span> = <span class="ruby-constant">Pathname</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">full_gem_path</span>).<span class="ruby-identifier">join</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">executable</span>).<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-node">&quot;#{bin_path}/#{executable}&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>, <span class="ruby-value">0755</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">template</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;-&quot;</span>).<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Runs the install procedures for a specific <a
href="../lib/bundler/templates/Gemfile.html">Gemfile</a>.</p>

<p>Firstly, this method will check to see if <a
href="../Bundler.html#method-c-bundle_path">Bundler.bundle_path</a> exists
and if not then will create it. This is usually the location of gems on the
system, be it RVM or at a system path.</p>

<p>Secondly, it checks if <a href="../Bundler.html">Bundler</a> has been
configured to be “frozen” Frozen ensures that the <a
href="../lib/bundler/templates/Gemfile.html">Gemfile</a> and the
Gemfile.lock file are matching. This stops a situation where a developer
may update the <a href="../lib/bundler/templates/Gemfile.html">Gemfile</a>
but may not run `bundle install`, which leads to the Gemfile.lock file not
being correctly updated. If this file is not correctly updated then any
other developer running `bundle install` will potentially not install the
correct gems.</p>

<p>Thirdly, <a href="../Bundler.html">Bundler</a> checks if there are any
dependencies specified in the <a
href="../lib/bundler/templates/Gemfile.html">Gemfile</a> using <a
href="Environment.html#method-i-dependencies">Bundler::Environment#dependencies</a>.
If there are no dependencies specified then <a
href="../Bundler.html">Bundler</a> returns a warning message stating so and
this method returns.</p>

<p>Fourthly, <a href="../Bundler.html">Bundler</a> checks if the default
lockfile (Gemfile.lock) exists, and if so then proceeds to set up a
defintion based on the default gemfile (Gemfile) and the default lock file
(Gemfile.lock). However, this is not the case if the platform is different
to that which is specified in Gemfile.lock, or if there are any missing
specs for the gems.</p>

<p>Fifthly, <a href="../Bundler.html">Bundler</a> resolves the dependencies
either through a cache of gems or by remote. This then leads into the gems
being installed, along with stubs for their executables, but only if the
–binstubs option has been passed or <a href=":bin">Bundler.options</a> has
been set earlier.</p>

<p>Sixthly, a new Gemfile.lock is created from the installed gems to ensure
that the next time that a user runs `bundle install` they will receive any
updates from this process.</p>

<p>Finally: TODO add documentation for how the standalone process works.</p>
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">create_bundle_path</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:frozen</span>]
    <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">ensure_equivalent_gemfile_and_lockfile</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:deployment</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;The Gemfile specifies no dependencies&quot;</span>
    <span class="ruby-identifier">lock</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">resolve_if_need</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">install</span>(<span class="ruby-identifier">options</span>)

  <span class="ruby-identifier">lock</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:frozen</span>]
  <span class="ruby-constant">Standalone</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>], <span class="ruby-ivar">@definition</span>).<span class="ruby-identifier">generate</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-can_install_in_parallel-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">can_install_in_parallel?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="can_install_in_parallel-3F-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">can_install_in_parallel?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">rubygems</span>.<span class="ruby-identifier">provides?</span>(<span class="ruby-string">&quot;&gt;= 2.1.0&quot;</span>)
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Rubygems #{Gem::VERSION} is not threadsafe, so your &quot;</span>           <span class="ruby-string">&quot;gems will be installed one at a time. Upgrade to Rubygems 2.1.0 &quot;</span>            <span class="ruby-string">&quot;or higher to enable parallel gem installation.&quot;</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_bundle_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_bundle_path</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create_bundle_path-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_bundle_path</span>
  <span class="ruby-constant">SharedHelpers</span>.<span class="ruby-identifier">filesystem_access</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bundle_path</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">p</span>)
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bundle_path</span>.<span class="ruby-identifier">exist?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">PathError</span>, <span class="ruby-node">&quot;Could not install to path `#{Bundler.settings[:path]}` &quot;</span>          <span class="ruby-string">&quot;because of an invalid symlink. Remove the symlink so the directory can be created.&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-install" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>the order that the resolver provides is significant, since dependencies
might actually affect the installation of a gem. that said, it&#39;s a rare
situation (other than rake), and parallel installation is just SO MUCH
FASTER. so we let people opt in.</p>
          
          

          
          <div class="method-source-code" id="install-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 152</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">force</span> = <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;force&quot;</span>]
  <span class="ruby-identifier">jobs</span> = <span class="ruby-value">1</span>
  <span class="ruby-identifier">jobs</span> = [<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:jobs</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">can_install_in_parallel?</span>
  <span class="ruby-identifier">install_in_parallel</span> <span class="ruby-identifier">jobs</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>], <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-install_in_parallel" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install_in_parallel</span><span
            class="method-args">(size, standalone, force = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="install_in_parallel-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_in_parallel</span>(<span class="ruby-identifier">size</span>, <span class="ruby-identifier">standalone</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">ParallelInstaller</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">specs</span>, <span class="ruby-identifier">size</span>, <span class="ruby-identifier">standalone</span>, <span class="ruby-identifier">force</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resolve_if_need" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resolve_if_need</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resolve_if_need-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 183</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve_if_need</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;update&quot;</span>]
    <span class="ruby-identifier">local</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">tmpdef</span> = <span class="ruby-constant">Definition</span>.<span class="ruby-identifier">build</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>, <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>, <span class="ruby-keyword">nil</span>)
        <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">tmpdef</span>.<span class="ruby-identifier">new_platform?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tmpdef</span>.<span class="ruby-identifier">missing_specs</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">BundlerError</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">local</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;local&quot;</span>] <span class="ruby-operator">?</span> <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">resolve_with_cache!</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">resolve_remotely!</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

